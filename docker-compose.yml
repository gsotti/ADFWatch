version: "3.8"

services:
  adfwatch:
    image: ghcr.io/gsotti/adfwatch:latest
    container_name: adfwatch
    restart: unless-stopped
    network_mode: host
    env_file:
      - .env
    environment:
      # Scanner Configuration
      - SCANNER_IP=192.168.1.94
      - SCANNER_NAME=My Scanner
      # - SCAN_SOURCE=ADF  # Optional: force specific source (leave commented for auto-detect)

      # Scan Settings
      - POLL_INTERVAL=5
      - SCAN_RESOLUTION=300
      - SCAN_MODE=Color
      - DUPLEX_FLIP_DELAY=10  # Seconds to wait for user to flip and reload backs
      - BLANK_THRESHOLD=0.005
      - OUTPUT_DIR=/scans
      - LOG_LEVEL=info

      # Upload Settings (optional - set UPLOAD_ENABLED=true to enable)
      - UPLOAD_ENABLED=false
      - UPLOAD_PROTOCOL=sftp  # ftp, ftps, sftp, or smb
      # - UPLOAD_HOST=your-server.com
      # - UPLOAD_PORT=22  # Optional, defaults: ftp=21, ftps=21, sftp=22, smb=445
      # - UPLOAD_USER=username
      # - UPLOAD_PASSWORD=password
      # - UPLOAD_PATH=/scans  # For FTP/SFTP: /remote/path | For SMB: sharename/subfolder
      # - UPLOAD_DELETE_AFTER=false  # Delete local file after successful upload

    volumes:
      - ./scans:/scans
